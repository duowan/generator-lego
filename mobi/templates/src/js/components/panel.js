/*! Project: LegoMobile
 *  Version: 3.0.0
 */
define("panel",["zepto"],function(a,b,c){var d=a("zepto"),e=d.fx.cssPrefix+"transform",f=(d.fx.transitionEnd,function(a){var b={targetContent:"",displayMode:"push",direction:"left",autoDismiss:!0};this.options=d.extend(b,a),this.el=arguments[0].ref,this.cont=this.options.targetContent,this.width=0===d(this.el).width()?window.innerWidth:d(this.el).width(),this.isOpen=!1,this.init()});f.prototype.init=function(){var a=this,b=a.options,c=a.getPosition()[b.displayMode];d(a.el).addClass("m-panel m-panel--"+b.direction),d(a.el).css(e,"translate3d("+a.transDirectionToPos(b.direction,c.panel[Number(a.isOpen)])+"px,0,0)").hide(),d(a.cont).addClass("m-panel--animate"),d(a.cont).get(0).clientLeft},f.prototype.controlPanel=function(a){var b=this,c=b.options,f=b.getPosition()[c.displayMode];d(b.el).addClass("m-panel--animate").show(),d(b.el).css(e,"translate3d("+b.transDirectionToPos(c.direction,f.panel[Number(a)])+"px,0,0)"),d(b.cont).css(e,"translate3d("+b.transDirectionToPos(c.direction,f.cont[Number(a)])+"px,0,0)"),b.isOpen=!b.isOpen},f.prototype.transDirectionToPos=function(a,b){return"left"===a?b:-b},f.prototype.getPosition=function(){var a=this,b=a.width;return{push:{panel:[-b,0],cont:[0,b]},overlay:{panel:[-b,0],cont:[0,0]}}},f.prototype.open=function(){return this.controlPanel(!0)},f.prototype.close=function(){return this.controlPanel(!1)},f.prototype.toggle=function(){return this[this.isOpen?"close":"open"]()},d.fn.Panel=function(a){return a=d.extend(a,{ref:this[0]}),new f(a)},c.exports=function(a){return new f(a)}});