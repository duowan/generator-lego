/*! Project: LegoMobile
 *  Version: 3.0.0
 */
define("lazyload",["zepto"],function(a){var b=a("zepto"),c=b(window);b.fn.lazyload=function(a){var d,e=this,f={threshold:0,failure_limit:0,event:"scroll",container:window,attr:"osrc",appear:null,loaded:null};a&&b.extend(f,a),d=void 0===f.container||f.container===window?c:b(f.container);var g=null,h=function(){g&&clearTimeout(g),g=setTimeout(i,50)},i=function(){if(e.length<=0)return void d.off(f.event,h);var a=0;e.each(function(){var c=b(this);if(b.abovethetop(this,f));else if(b.belowthefold(this,f)){if(++a>f.failure_limit)return!1}else c.trigger("appear"),a=0})};return 0===f.event.indexOf("scroll")&&d.on(f.event,h),this.each(function(){var a=this,c=b(a);a.loaded=!1,c.one("appear",function(){if(!a.loaded){if(b.isFunction(f.appear)){var d=e.length;f.appear.call(a,d,f)}b("<img />").on("load",function(){"IMG"===a.tagName?c.hide().attr("src",c.data(f.attr)).show():c.css("background-image","url("+c.data(f.attr)+")"),a.loaded=!0;var d=b.grep(e,function(a){return!a.loaded});if(e=b(d),b.isFunction(f.loaded)){var g=e.length;f.loaded.call(a,g,f)}}).attr("src",c.data(f.attr))}}),0!==f.event.indexOf("scroll")&&c.on(f.event,function(){a.loaded||c.trigger("appear")})}),c.on("resize",function(){i()}),c.on("load",function(){i()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&c.on("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&e.each(function(){b(this).trigger("appear")})}),this},b.belowthefold=function(a,d){var e;return e=void 0===d.container||d.container===window?c.height()+c.scrollTop():b(d.container).offset().top+b(d.container).height(),e<=b(a).offset().top-d.threshold},b.abovethetop=function(a,d){var e;return e=void 0===d.container||d.container===window?c.scrollTop():b(d.container).offset().top,e>=b(a).offset().top+d.threshold+b(a).height()}});