/*! Project: LegoMobile
 *  Version: 3.0.0
 */
define(function(a,b,c){var d=function(a,b){function c(){m==i.length-1?(m=1,t(m,0),o=setTimeout(s,v)):o=setTimeout(s,v)}function d(){v=0,clearTimeout(o)}var e=function(){},f=function(a){setTimeout(a||e,0)},g=navigator.userAgent.toLowerCase(),h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var i,j,k,l=a[0].children[0];b=b||{};var m=parseInt(b.startSlide,10)||0,n=b.speed||300;b.disableTouch=void 0!==b.disableTouch?b.disableTouch:!1;var o,p,q=({startSlide:0,speed:300,auto:0,disableTouch:void 0!==b.disableTouch?b.disableTouch:!1,disableScroll:void 0!==b.disableScroll?b.disableScroll:!1,stopPropagation:!1,callback:""},function(){i=l.children,i.length<2||(r(),t(1,0))}),r=function(){var a=l.children[i.length-1].cloneNode(!0),b=l.children[0].cloneNode(!0);a.className+=" add_con",b.className+=" add_con",l.insertBefore(a,l.children[0]),l.appendChild(b),k=i[0].getBoundingClientRect().width||i.offsetWidth,l.style.width=i.length*k+"px",j=new Array(i.length)},s=function(){b.continuous?t(m+1,n):m<i.length-1&&t(m+1,n)},t=function(a,c){u(-a*k,c),m=a,b.callback(m-1)},u=function(a,b){var c=l&&l.style;c.webkitTransitionDuration=c.MozTransitionDuration=c.msTransitionDuration=c.OTransitionDuration=c.transitionDuration=b+"ms",c.webkitTransform=-1!=g.indexOf("gt-")?"translateX("+a+"px)":"translate("+a+"px,0)translateZ(0)",c.msTransform=c.MozTransform=c.OTransform="translateX("+a+"px)"},v=b.auto||0,w={},x={},y={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":f(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(a));break;case"resize":f(t(m,0))}b.stopPropagation&&a.stopPropagation()},start:function(a){if(!b.disableTouch){var c=a.touches[0];w={x:c.pageX,y:c.pageY,time:+new Date},p=void 0,l.addEventListener("touchmove",this,!1),l.addEventListener("touchend",this,!1)}},move:function(a){if(!b.disableTouch&&!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];x={x:c.pageX-w.x,y:c.pageY-w.y},"undefined"==typeof p&&(p=!!(p||Math.abs(x.x)<Math.abs(x.y))),p||(a.preventDefault(),d(),"undefined"==typeof j[m]&&(j[m]=0),u(x.x-m*k,0))}},end:function(){if(!b.disableTouch&&"undefined"!=typeof p){{var a=+new Date-w.time,c=Number(a)<250&&Math.abs(x.x)>20||Math.abs(x.x)>k/2;!m&&x.x>0||m==i.length-1&&x.x<0}p||(c?x.x<0?(m+=1,t(m,n),m==i.length-1&&setTimeout(function(){m=1,t(m,0)},200)):(m-=1,t(m,n),0===m&&setTimeout(function(){m=i.length-2,t(m,0)},200)):t(m,n)),l.removeEventListener("touchmove",y,!1),l.removeEventListener("touchend",y,!1)}},transitionEnd:function(){v&&c()}};q(),v&&c(),h.addEventListener?(h.touch&&l.addEventListener("touchstart",y,!1),h.transitions&&(l.addEventListener("webkitTransitionEnd",y,!1),l.addEventListener("msTransitionEnd",y,!1),l.addEventListener("oTransitionEnd",y,!1),l.addEventListener("otransitionend",y,!1),l.addEventListener("transitionend",y,!1)),window.addEventListener("resize",y,!1)):window.onresize=function(){q()}}};c.exports=function(a,b){return new d(a,b)}});